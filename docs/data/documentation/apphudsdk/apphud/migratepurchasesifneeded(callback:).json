{"identifier":{"url":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/Apphud\/migratePurchasesIfNeeded(callback:)","interfaceLanguage":"swift"},"kind":"symbol","schemaVersion":{"minor":3,"major":0,"patch":0},"abstract":[{"text":"Migrates existing purchases to Apphud. This method is intended for importing App Store receipts for users who are already paying but are not yet tracked by Apphud. It should be used only for migrating existing paying users at the launch of your app.","type":"text"}],"deprecationSummary":[{"type":"paragraph","inlineContent":[{"text":"No longer needed for iOS 15+. Purchases migrate automatically.","type":"text"}]}],"variants":[{"paths":["\/documentation\/apphudsdk\/apphud\/migratepurchasesifneeded(callback:)"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"attribute","text":"@"},{"text":"MainActor","kind":"attribute","preciseIdentifier":"s:ScM"},{"text":" ","kind":"text"},{"kind":"keyword","text":"static"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"migratePurchasesIfNeeded"},{"text":"(","kind":"text"},{"text":"callback","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"@escaping","kind":"attribute"},{"text":" ([","kind":"text"},{"kind":"typeIdentifier","text":"ApphudSubscription","preciseIdentifier":"s:9ApphudSDK0A12SubscriptionC","identifier":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/ApphudSubscription"},{"kind":"text","text":"]?, ["},{"preciseIdentifier":"s:9ApphudSDK0A19NonRenewingPurchaseC","text":"ApphudNonRenewingPurchase","kind":"typeIdentifier","identifier":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/ApphudNonRenewingPurchase"},{"text":"]?, ","kind":"text"},{"preciseIdentifier":"s:s5ErrorP","kind":"typeIdentifier","text":"Error"},{"text":"?) -> ","kind":"text"},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")"}],"platforms":["iOS"],"languages":["swift"]}]},{"content":[{"type":"heading","anchor":"discussion","text":"Discussion","level":2},{"type":"paragraph","inlineContent":[{"text":"Example:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["   \/\/ hasPurchases - is your own boolean value indicating that the current user is a paying user.","   if hasPurchases {","       Apphud.migratePurchasesIfNeeded { _, _, _ in}","   }"]},{"type":"paragraph","inlineContent":[{"text":"Note: This method can be removed after a certain period, such as when you are confident that all paying users have been synced with Apphud.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Deprecated: No longer needed for iOS 15 and later, as purchases migrate automatically."}]}],"kind":"content"}],"sections":[],"hierarchy":{"paths":[["doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK","doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/Apphud"]]},"metadata":{"modules":[{"name":"ApphudSDK"}],"roleHeading":"Type Method","title":"migratePurchasesIfNeeded(callback:)","role":"symbol","platforms":[],"symbolKind":"method","externalID":"s:9ApphudSDK0A0C24migratePurchasesIfNeeded8callbackyySayAA0A12SubscriptionCGSg_SayAA0A19NonRenewingPurchaseCGSgs5Error_pSgtc_tFZ","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"migratePurchasesIfNeeded","kind":"identifier"},{"kind":"text","text":"("},{"text":"callback","kind":"externalParam"},{"text":": ([","kind":"text"},{"kind":"typeIdentifier","text":"ApphudSubscription","preciseIdentifier":"s:9ApphudSDK0A12SubscriptionC"},{"text":"]?, [","kind":"text"},{"text":"ApphudNonRenewingPurchase","kind":"typeIdentifier","preciseIdentifier":"s:9ApphudSDK0A19NonRenewingPurchaseC"},{"text":"]?, ","kind":"text"},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":"?) -> ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"text":")","kind":"text"}]},"references":{"doc://org.cocoapods.ApphudSDK/documentation/ApphudSDK":{"identifier":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK","abstract":[],"kind":"symbol","url":"\/documentation\/apphudsdk","role":"collection","title":"ApphudSDK","type":"topic"},"doc://org.cocoapods.ApphudSDK/documentation/ApphudSDK/ApphudSubscription":{"identifier":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/ApphudSubscription","abstract":[{"type":"text","text":"Custom Apphud class containing all information about customer subscription."}],"kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"ApphudSubscription"}],"url":"\/documentation\/apphudsdk\/apphudsubscription","type":"topic","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"ApphudSubscription","kind":"identifier"}],"title":"ApphudSubscription","role":"symbol"},"doc://org.cocoapods.ApphudSDK/documentation/ApphudSDK/Apphud/migratePurchasesIfNeeded(callback:)":{"identifier":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/Apphud\/migratePurchasesIfNeeded(callback:)","url":"\/documentation\/apphudsdk\/apphud\/migratepurchasesifneeded(callback:)","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"migratePurchasesIfNeeded","kind":"identifier"},{"text":"(","kind":"text"},{"text":"callback","kind":"externalParam"},{"kind":"text","text":": (["},{"kind":"typeIdentifier","preciseIdentifier":"s:9ApphudSDK0A12SubscriptionC","text":"ApphudSubscription"},{"kind":"text","text":"]?, ["},{"preciseIdentifier":"s:9ApphudSDK0A19NonRenewingPurchaseC","text":"ApphudNonRenewingPurchase","kind":"typeIdentifier"},{"text":"]?, ","kind":"text"},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":"?) -> ","kind":"text"},{"text":"Void","preciseIdentifier":"s:s4Voida","kind":"typeIdentifier"},{"text":")","kind":"text"}],"deprecated":true,"role":"symbol","abstract":[{"type":"text","text":"Migrates existing purchases to Apphud. This method is intended for importing App Store receipts for users who are already paying but are not yet tracked by Apphud. It should be used only for migrating existing paying users at the launch of your app."}],"kind":"symbol","type":"topic","title":"migratePurchasesIfNeeded(callback:)"},"doc://org.cocoapods.ApphudSDK/documentation/ApphudSDK/Apphud":{"identifier":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/Apphud","kind":"symbol","navigatorTitle":[{"text":"Apphud","kind":"identifier"}],"abstract":[{"type":"text","text":"Entry point of the Apphud SDK. It provides access to all its features."}],"type":"topic","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"Apphud","kind":"identifier"}],"role":"symbol","url":"\/documentation\/apphudsdk\/apphud","title":"Apphud"},"doc://org.cocoapods.ApphudSDK/documentation/ApphudSDK/ApphudNonRenewingPurchase":{"identifier":"doc:\/\/org.cocoapods.ApphudSDK\/documentation\/ApphudSDK\/ApphudNonRenewingPurchase","navigatorTitle":[{"text":"ApphudNonRenewingPurchase","kind":"identifier"}],"kind":"symbol","title":"ApphudNonRenewingPurchase","abstract":[{"text":"Custom Apphud class containing all information about customer non-renewing purchase","type":"text"}],"fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"ApphudNonRenewingPurchase","kind":"identifier"}],"role":"symbol","type":"topic","url":"\/documentation\/apphudsdk\/apphudnonrenewingpurchase"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"value":"Apphud","op":"replace","path":"\/references\/doc:~1~1org.cocoapods.ApphudSDK~1documentation~1ApphudSDK~1Apphud\/title"},{"value":[{"text":"Apphud","kind":"identifier"}],"path":"\/references\/doc:~1~1org.cocoapods.ApphudSDK~1documentation~1ApphudSDK~1Apphud\/fragments","op":"replace"}]}]}